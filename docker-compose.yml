version: "3.8"

services:
    ygwifi:
        build: .
        container_name: ygwifi
        image: ryazbeck/ygwifi:${TAG:-dev}
        volumes:
            - /var/log:/var/log
        network_mode: host
        privileged: true
        ports:
            - "5000"
        logging:
            driver: "json-file"
            options:
                max-file: "5"
                max-size: "2m"
        sysctls:
            - net.ipv6.conf.all.disable_ipv6=1
        dns:
            - 8.8.8.8
            - 8.8.4.4
        environment:
            FLASK_APP: "app.py"
            FLASK_ENV: ${FLASK_ENV:-Development}
        restart: ${RESTART_POLICY:-always}
